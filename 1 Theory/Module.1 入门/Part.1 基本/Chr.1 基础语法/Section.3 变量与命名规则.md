# 变量与命名规则

[TOC]

---

变量是程序中用于存储和表示数据的命名容器。理解变量及其命名规则，是编写可读、可维护代码的第一步。本章将系统介绍 JavaScript 中的常量、变量、关键字，命名规则，以及变量与数据本身的关系。

---

## 1. 常量、变量与关键字

### 1.1 变量

变量是用于存储值的命名位置，其值可以在程序运行过程中改变。在 JavaScript 中，使用 `let` 或 `var` 声明变量。

- **`let`**（ES6 引入）：声明一个块作用域的变量，可以被重新赋值。

  ```javascript
  let age = 25;
  age = 26; // 允许重新赋值
  ```

- **`var`**（ES5 及以前）：声明一个函数作用域或全局作用域的变量，存在变量提升（hoisting）现象，现代开发中建议用 `let` 和 `const` 代替。

  ```javascript
  var name = 'Alice';
  name = 'Bob'; // 允许重新赋值
  ```

### 1.2 常量

常量用于存储一旦初始化就不应再改变的值。使用 `const`（ES6 引入）声明。

- **`const`**：声明一个块作用域的常量，必须在声明时初始化，且之后不能重新赋值。

  ```javascript
  const PI = 3.14159;
  // PI = 3.14; // 错误：不能重新赋值
  ```

**注意**：`const` 声明的变量如果是对象或数组，其**内容**（属性或元素）是可以修改的，只是变量本身不能指向另一个对象。

```javascript
const user = { name: 'Alice' };
user.name = 'Bob'; // 允许修改属性
// user = { name: 'Charlie' }; // 错误：不能重新赋值
```

### 1.3 关键字

关键字是 JavaScript 语言保留的、具有特殊含义的单词，不能用作变量名或函数名。常见的关键字包括：

- **声明相关**：`var`、`let`、`const`、`function`、`class`、`import`、`export`
- **流程控制**：`if`、`else`、`switch`、`case`、`default`、`for`、`while`、`do`、`break`、`continue`、`return`
- **异常处理**：`try`、`catch`、`finally`、`throw`
- **其他**：`this`、`super`、`new`、`delete`、`typeof`、`instanceof`、`void`、`yield`、`await`（部分为未来保留）

**注意**：还有一部分是“保留字”，可能在将来成为关键字，也不建议用作标识符（如 `enum`、`implements` 等，严格模式下有限制）。

---

## 2. 命名规则

### 2.1 语法规则（必须遵守）

JavaScript 标识符（变量名、函数名等）的命名必须遵循以下规则：

- **组成字符**：可以使用字母（A-Z、a-z）、数字（0-9）、下划线（`_`）和美元符号（`$`）。
- **首字符**：不能以数字开头，但可以以下划线或美元符号开头（通常有特殊约定）。
- **大小写敏感**：`myVar` 和 `myvar` 是两个不同的变量。
- **不能使用关键字或保留字**：如 `let`、`class` 等不能作为变量名。

合法示例：`age`、`_count`、`$value`、`userName`、`product123`  
非法示例：`123abc`（以数字开头）、`my-name`（连字符不允许）、`class`（关键字）

### 2.2 命名风格（建议遵守）

除了语法规则，良好的命名风格能极大提升代码可读性。社区常见约定：

- **驼峰命名法（camelCase）**：变量名、函数名、方法名通常使用小驼峰，即首字母小写，后续单词首字母大写。  
  `userName`、`getUserData`、`isValid`
- **帕斯卡命名法（PascalCase）**：类名、构造函数名、组件名（如 React）使用大驼峰，即每个单词首字母大写。  
  `UserProfile`、`HttpClient`、`AppContainer`
- **全大写+下划线**：常量（尤其是全局常量）通常使用全大写字母，单词间用下划线分隔。  
  `MAX_RETRY_COUNT`、`API_BASE_URL`
- **私有属性**：有时在变量名前加下划线表示“私有”（只是一种约定，语言层面并不强制）。  
  `_internalValue`、`_privateMethod`

### 2.3 命名的语义要求

- **名副其实**：名称应准确表达其用途，避免使用无意义的 `a`、`b`、`tmp`（极短生命周期除外）。

  ```javascript
  // 不清晰
  let d = 7; // 什么7？

  // 清晰
  let daysInWeek = 7;
  ```

- **避免歧义**：不要使用容易混淆的缩写或名称。

  ```javascript
  // 不推荐
  let usrN = 'Alice';

  // 推荐
  let userName = 'Alice';
  ```

- **布尔值推荐用 `is`、`has`、`can` 等开头**，使其语义更明确。

  ```javascript
  let isActive = true;
  let hasPermission = false;
  let canEdit = true;
  ```

- **动词+名词**：函数名通常以动词开头，如 `get`、`set`、`fetch`、`validate`。

### 2.4 特殊命名场景

- **循环计数器**：传统上使用 `i`、`j`、`k` 等单字母变量，这是被广泛接受的惯例，仅限于简单循环内部。
- **临时变量**：如 `temp`、`result` 可以在短时间内使用，但应确保其用途清晰。

---

## 3. 物理/语法上的变量 与 概念上的数据

初学者常混淆“变量”与“数据”这两个概念。理解它们的区别与联系，有助于深入掌握 JavaScript 的内存模型和类型系统。

### 3.1 变量是容器，数据是内容

- **物理（语法）层面**：变量是内存中一块命名的空间，用于存储值。它有自己的地址和生命周期。
- **概念层面**：数据是存储在变量中的具体信息，包括其类型、状态和结构。

例如：

```javascript
let age = 25;
```

- 语法上：我们创建了一个名为 `age` 的变量。
- 概念上：变量 `age` 中存储了一个数值 `25`，这是一个 **数字类型** 的数据。

### 3.2 数据类型

JavaScript 是一种动态类型语言，变量可以随时保存任何类型的数据，无需提前声明类型。数据类型分为两大类：

- **原始类型（Primitive types）**：`string`、`number`、`boolean`、`undefined`、`null`、`symbol`（ES6）、`bigint`（ES2020）。原始类型的值是不可变的，变量存储的是值本身。

  ```javascript
  let str = 'hello';
  str.toUpperCase(); // 返回新字符串，原字符串不变
  console.log(str); // 仍是 'hello'
  ```

- **引用类型（Reference types）**：对象（Object）、数组（Array）、函数（Function）、日期（Date）等。变量存储的是指向内存中对象的引用（指针），而非对象本身。

  ```javascript
  let obj1 = { name: 'Alice' };
  let obj2 = obj1; // obj2 和 obj1 指向同一个对象
  obj2.name = 'Bob';
  console.log(obj1.name); // 'Bob'，因为两者引用同一对象
  ```

### 3.3 数据状态与可变性

- **原始类型不可变**：对原始值的操作总是返回新值，不会改变原变量。
- **引用类型可变**：对象的内容可以修改，但变量存储的引用不变（除非重新赋值）。

```javascript
let a = 10;
a = 20; // 这里不是改变 10 这个值，而是让 a 指向新的值 20

let arr = [1, 2, 3];
arr.push(4); // 数组内容改变，但 arr 仍然指向同一数组
```

### 3.4 数据结构

数据可以具有复杂的结构，由基本类型组合而成。常见的内置数据结构包括：

- **对象（Object）**：无序的键值对集合。

  ```javascript
  let person = {
    name: 'Alice',
    age: 30,
    hobbies: ['reading', 'gaming']
  };
  ```

- **数组（Array）**：有序的列表，可以包含任意类型元素。

  ```javascript
  let colors = ['red', 'green', 'blue'];
  ```

- **Map、Set**（ES6）：更专用的数据结构，分别用于存储键值对和唯一值。
- **WeakMap、WeakSet**：弱引用版本，用于避免内存泄漏。

### 3.5 变量与内存（简要理解）

- 原始类型通常存储在 **栈内存** 中（大小固定，访问快）。
- 引用类型存储在 **堆内存** 中，栈中保存的是堆内存地址。

当我们将一个对象赋值给另一个变量时，实际上复制的是引用，所以两个变量指向同一对象；当重新给某个变量赋值一个新对象时，只是切断了该变量与原对象的引用关系。

```javascript
let objA = { value: 1 };
let objB = objA;   // objB 引用同一对象
objA = { value: 2 }; // objA 指向新对象，objB 仍指向旧对象
console.log(objB.value); // 1
```

### 3.6 总结：变量与数据的哲学

- **变量**是程序中的抽象标识符，用于操作数据。
- **数据**是实际存储的信息，具有类型、值和结构。
- 理解变量与数据的分离，有助于避免常见的编程错误（如引用拷贝与值拷贝混淆），并为后续学习深拷贝、不可变数据等高级话题打下基础。

---

## 小结

本章介绍了 JavaScript 中变量的声明方式（`let`、`const`、`var`），常量的概念，以及必须遵守的命名规则和推荐的最佳实践。最后，我们深入探讨了变量作为“容器”与数据作为“内容”的区别，并简要涉及数据类型、状态和结构。掌握这些基础知识，将为后续学习数据类型、函数和作用域等内容铺平道路。

在下一节中，我们将学习操作符与表达式，进一步探索如何操作变量中的数据。
